services:
  frontend:
    build:
      context: ./frontend
    restart: always

  backend:
     build:
       context: ./backend
     restart: always
   
  webserver:
    image: nginx:alpine
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
      - ./certbot/www/:/var/www/certbot/:ro
      - ./cert/mental-health.erklaerbare-ki.de/:/cert/:ro
    ports:
        - "90:90"
    depends_on:
      - frontend
      - backend
    restart: always


  certbot:
    image: certbot/certbot:latest
    volumes: 
      - ./certbot/www/:/var/www/certbot/:rw
